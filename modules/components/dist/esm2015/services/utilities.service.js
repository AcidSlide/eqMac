import { Injectable } from '@angular/core';
import * as i0 from "@angular/core";
export class UtilitiesService {
    mapValue(value, inMin, inMax, outMin, outMax) {
        return (value - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;
    }
    logMapValue({ value, inMin, inMax, outMin, outMax }) {
        outMin = Math.log(outMin);
        outMax = Math.log(outMax);
        const scale = (outMax - outMin) / (inMax - inMin);
        return Math.exp(outMin + scale * (value - inMin));
    }
    logMapValueInverse({ value, inMin, inMax, outMin, outMax }) {
        inMin = Math.log(inMin || 1);
        inMax = Math.log(inMax);
        outMin = outMin || 1;
        const scale = (inMax - inMin) / (outMax - outMin);
        const result = (Math.log(value) - inMin) / scale + outMin;
        return result;
    }
    getImageFromSrcWhenLoaded(src) {
        return new Promise((resolve, reject) => {
            const image = new Image();
            image.crossOrigin = 'anonymous'; // This enables CORS
            image.onload = () => resolve(image);
            image.onerror = () => reject(image);
            image.src = src;
        });
    }
    getBackgroundImageSrcFromClass(className) {
        var _a;
        const div = document.createElement('div');
        div.className = className;
        document.getElementsByTagName('body')[0].appendChild(div);
        const style = window.getComputedStyle(div);
        const src = style.backgroundImage.slice(4, style.backgroundImage.length - 1).replace(/"/g, '');
        (_a = div.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(div);
        return src;
    }
    getImageFromClassBackgroundImageSrcWhenLoaded(className) {
        return this.getImageFromSrcWhenLoaded(this.getBackgroundImageSrcFromClass(className));
    }
    getRandomFloatInRange(min, max) {
        return (Math.random() * (max - min) + min);
    }
    getCoordinatesInsideElementFromEvent(event, element) {
        const el = element || event.target;
        const rect = el.getBoundingClientRect();
        return {
            x: event.clientX - rect.left,
            y: event.clientY - rect.top
        };
    }
    delay(ms) {
        return new Promise(resolve => {
            setTimeout(resolve, ms);
        });
    }
    getElementPosition(el) {
        const rect = el.getBoundingClientRect();
        const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        return { y: rect.top + scrollTop, x: rect.left + scrollLeft };
    }
    hexToRgb(hex) {
        const result = /^#?([a-f\d]{1,2})([a-f\d]{1,2})([a-f\d]{1,2})$/i.exec(hex);
        if (result) {
            const rgb = {
                r: result[1],
                g: result[2],
                b: result[3]
            };
            for (const [color, hex] of Object.entries(rgb)) {
                if (hex.length < 2)
                    rgb[color] = `${hex}${hex}`;
                rgb[color] = parseInt(rgb[color], 16);
            }
            return rgb;
        }
        else {
            return { r: 0, g: 0, b: 0 };
        }
    }
    rgbToHex({ r, g, b }) {
        return '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
    }
}
UtilitiesService.ɵprov = i0.ɵɵdefineInjectable({ factory: function UtilitiesService_Factory() { return new UtilitiesService(); }, token: UtilitiesService, providedIn: "root" });
UtilitiesService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbGl0aWVzLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvYXBwL2NvbXBvbmVudHMvc2VydmljZXMvdXRpbGl0aWVzLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQTs7QUFLMUMsTUFBTSxPQUFPLGdCQUFnQjtJQUMzQixRQUFRLENBQUUsS0FBYSxFQUFFLEtBQWEsRUFBRSxLQUFhLEVBQUUsTUFBYyxFQUFFLE1BQWM7UUFDbkYsT0FBTyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsR0FBRyxNQUFNLENBQUE7SUFDdkUsQ0FBQztJQUVELFdBQVcsQ0FBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBTWpEO1FBQ0MsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDekIsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDekIsTUFBTSxLQUFLLEdBQUcsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLENBQUE7UUFDakQsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxLQUFLLEdBQUcsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQTtJQUNuRCxDQUFDO0lBRUQsa0JBQWtCLENBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQU14RDtRQUNDLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQTtRQUM1QixLQUFLLEdBQUcs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LENBQUE7U0FDNUI7SUFDSCxDQUFDO0lBRUQsUUFBUSxDQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQXVDO1FBQ3hELE9BQU8sR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTtJQUMzRSxDQUFDOzs7O1lBM0dGLFVBQVUsU0FBQztnQkFDVixVQUFVLEVBQUUsTUFBTTthQUNuQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJ1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBVdGlsaXRpZXNTZXJ2aWNlIHtcbiAgbWFwVmFsdWUgKHZhbHVlOiBudW1iZXIsIGluTWluOiBudW1iZXIsIGluTWF4OiBudW1iZXIsIG91dE1pbjogbnVtYmVyLCBvdXRNYXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuICh2YWx1ZSAtIGluTWluKSAqIChvdXRNYXggLSBvdXRNaW4pIC8gKGluTWF4IC0gaW5NaW4pICsgb3V0TWluXG4gIH1cblxuICBsb2dNYXBWYWx1ZSAoeyB2YWx1ZSwgaW5NaW4sIGluTWF4LCBvdXRNaW4sIG91dE1heCB9OiB7XG4gICAgdmFsdWU6IG51bWJlclxuICAgIGluTWluOiBudW1iZXJcbiAgICBpbk1heDogbnVtYmVyXG4gICAgb3V0TWluOiBudW1iZXJcbiAgICBvdXRNYXg6IG51bWJlclxuICB9KSB7XG4gICAgb3V0TWluID0gTWF0aC5sb2cob3V0TWluKVxuICAgIG91dE1heCA9IE1hdGgubG9nKG91dE1heClcbiAgICBjb25zdCBzY2FsZSA9IChvdXRNYXggLSBvdXRNaW4pIC8gKGluTWF4IC0gaW5NaW4pXG4gICAgcmV0dXJuIE1hdGguZXhwKG91dE1pbiArIHNjYWxlICogKHZhbHVlIC0gaW5NaW4pKVxuICB9XG5cbiAgbG9nTWFwVmFsdWVJbnZlcnNlICh7IHZhbHVlLCBpbk1pbiwgaW5NYXgsIG91dE1pbiwgb3V0TWF4IH06IHtcbiAgICB2YWx1ZTogbnVtYmVyXG4gICAgaW5NaW46IG51bWJlclxuICAgIGluTWF4OiBudW1iZXJcbiAgICBvdXRNaW46IG51bWJlclxuICAgIG91dE1heDogbnVtYmVyXG4gIH0pIHtcbiAgICBpbk1pbiA9IE1hdGgubG9nKGluTWluIHx8IDEpXG4gICAgaW5NYXggPSBNYXRoLmxvZyhpbk1heClcbiAgICBvdXRNaW4gPSBvdXRNaW4gfHwgMVxuICAgIGNvbnN0IHNjYWxlID0gKGluTWF4IC0gaW5NaW4pIC8gKG91dE1heCAtIG91dE1pbilcbiAgICBjb25zdCByZXN1bHQgPSAoTWF0aC5sb2codmFsdWUpIC0gaW5NaW4pIC8gc2NhbGUgKyBvdXRNaW5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBnZXRJbWFnZUZyb21TcmNXaGVuTG9hZGVkIChzcmM6IHN0cmluZykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpXG4gICAgICBpbWFnZS5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnIC8vIFRoaXMgZW5hYmxlcyBDT1JTXG4gICAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKGltYWdlKVxuICAgICAgaW1hZ2Uub25lcnJvciA9ICgpID0+IHJlamVjdChpbWFnZSlcbiAgICAgIGltYWdlLnNyYyA9IHNyY1xuICAgIH0pXG4gIH1cblxuICBnZXRCYWNrZ3JvdW5kSW1hZ2VTcmNGcm9tQ2xhc3MgKGNsYXNzTmFtZTogc3RyaW5nKSB7XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBkaXYuY2xhc3NOYW1lID0gY2xhc3NOYW1lXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXS5hcHBlbmRDaGlsZChkaXYpXG4gICAgY29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkaXYpXG4gICAgY29uc3Qgc3JjID0gc3R5bGUuYmFja2dyb3VuZEltYWdlLnNsaWNlKDQsIHN0eWxlLmJhY2tncm91bmRJbWFnZS5sZW5ndGggLSAxKS5yZXBsYWNlKC9cIi9nLCAnJylcbiAgICBkaXYucGFyZW50Tm9kZT8ucmVtb3ZlQ2hpbGQoZGl2KVxuICAgIHJldHVybiBzcmNcbiAgfVxuXG4gIGdldEltYWdlRnJvbUNsYXNzQmFja2dyb3VuZEltYWdlU3JjV2hlbkxvYWRlZCAoY2xhc3NOYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJbWFnZUZyb21TcmNXaGVuTG9hZGVkKHRoaXMuZ2V0QmFja2dyb3VuZEltYWdlU3JjRnJvbUNsYXNzKGNsYXNzTmFtZSkpXG4gIH1cblxuICBnZXRSYW5kb21GbG9hdEluUmFuZ2UgKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcikge1xuICAgIHJldHVybiAoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluKVxuICB9XG5cbiAgZ2V0Q29vcmRpbmF0ZXNJbnNpZGVFbGVtZW50RnJvbUV2ZW50IChldmVudDogTW91c2VFdmVudCwgZWxlbWVudD86IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgZWwgPSBlbGVtZW50IHx8IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudFxuICAgIGNvbnN0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIHJldHVybiB7XG4gICAgICB4OiBldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0LFxuICAgICAgeTogZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wXG4gICAgfVxuICB9XG5cbiAgZGVsYXkgKG1zOiBudW1iZXIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKVxuICAgIH0pXG4gIH1cblxuICBnZXRFbGVtZW50UG9zaXRpb24gKGVsOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIGNvbnN0IHNjcm9sbExlZnQgPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnRcbiAgICBjb25zdCBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcFxuICAgIHJldHVybiB7IHk6IHJlY3QudG9wICsgc2Nyb2xsVG9wLCB4OiByZWN0LmxlZnQgKyBzY3JvbGxMZWZ0IH1cbiAgfVxuXG4gIGhleFRvUmdiIChoZXg6IHN0cmluZykge1xuICAgIGNvbnN0IHJlc3VsdCA9IC9eIz8oW2EtZlxcZF17MSwyfSkoW2EtZlxcZF17MSwyfSkoW2EtZlxcZF17MSwyfSkkL2kuZXhlYyhoZXgpXG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgdHlwZSBjb2xvckNvZGUgPSAncicgfCAnZycgfCAnYidcbiAgICAgIGNvbnN0IHJnYjogeyBbY29sb3IgaW4gY29sb3JDb2RlXTogYW55IH0gPSB7XG4gICAgICAgIHI6IHJlc3VsdFsxXSxcbiAgICAgICAgZzogcmVzdWx0WzJdLFxuICAgICAgICBiOiByZXN1bHRbM11cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgWyBjb2xvciwgaGV4IF0gb2YgT2JqZWN0LmVudHJpZXMocmdiKSkge1xuICAgICAgICBpZiAoKGhleCBhcyBzdHJpbmcpLmxlbmd0aCA8IDIpIHJnYltjb2xvciBhcyBjb2xvckNvZGVdID0gYCR7aGV4fSR7aGV4fWBcbiAgICAgICAgcmdiW2NvbG9yIGFzIGNvbG9yQ29kZV0gPSBwYXJzZUludChyZ2JbY29sb3IgYXMgY29sb3JDb2RlXSwgMTYpXG4gICAgICB9XG4gICAgICByZXR1cm4gcmdiXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7IHI6IDAsIGc6IDAsIGI6IDAgfVxuICAgIH1cbiAgfVxuXG4gIHJnYlRvSGV4ICh7IHIsIGcsIGIgfTogeyByOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyIH0pIHtcbiAgICByZXR1cm4gJyMnICsgKCgxIDw8IDI0KSArIChyIDw8IDE2KSArIChnIDw8IDgpICsgYikudG9TdHJpbmcoMTYpLnNsaWNlKDEpXG4gIH1cbn1cbiJdfQ==