import { Injectable } from '@angular/core';
import * as i0 from "@angular/core";
export class UtilitiesService {
    mapValue(value, inMin, inMax, outMin, outMax) {
        return (value - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;
    }
    logMapValue({ value, inMin, inMax, outMin, outMax }) {
        outMin = Math.log(outMin);
        outMax = Math.log(outMax);
        const scale = (outMax - outMin) / (inMax - inMin);
        return Math.exp(outMin + scale * (value - inMin));
    }
    logMapValueInverse({ value, inMin, inMax, outMin, outMax }) {
        inMin = Math.log(inMin || 1);
        inMax = Math.log(inMax);
        outMin = outMin || 1;
        const scale = (inMax - inMin) / (outMax - outMin);
        const result = (Math.log(value) - inMin) / scale + outMin;
        return result;
    }
    getImageFromSrcWhenLoaded(src) {
        return new Promise((resolve, reject) => {
            const image = new Image();
            image.crossOrigin = 'anonymous'; // This enables CORS
            image.onload = () => resolve(image);
            image.onerror = () => reject(image);
            image.src = src;
        });
    }
    getBackgroundImageSrcFromClass(className) {
        var _a;
        const div = document.createElement('div');
        div.className = className;
        document.getElementsByTagName('body')[0].appendChild(div);
        const style = window.getComputedStyle(div);
        const src = style.backgroundImage.slice(4, style.backgroundImage.length - 1).replace(/"/g, '');
        (_a = div.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(div);
        return src;
    }
    getImageFromClassBackgroundImageSrcWhenLoaded(className) {
        return this.getImageFromSrcWhenLoaded(this.getBackgroundImageSrcFromClass(className));
    }
    getRandomFloatInRange(min, max) {
        return (Math.random() * (max - min) + min);
    }
    getCoordinatesInsideElementFromEvent(event, element) {
        const el = element || event.target;
        const rect = el.getBoundingClientRect();
        return {
            x: event.clientX - rect.left,
            y: event.clientY - rect.top
        };
    }
    delay(ms) {
        return new Promise(resolve => {
            setTimeout(resolve, ms);
        });
    }
    getElementPosition(el) {
        const rect = el.getBoundingClientRect();
        const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        return { y: rect.top + scrollTop, x: rect.left + scrollLeft };
    }
    hexToRgb(hex) {
        const result = /^#?([a-f\d]{1,2})([a-f\d]{1,2})([a-f\d]{1,2})$/i.exec(hex);
        if (result) {
            const rgb = {
                r: result[1],
                g: result[2],
                b: result[3]
            };
            for (const [color, hex] of Object.entries(rgb)) {
                if (hex.length < 2)
                    rgb[color] = `${hex}${hex}`;
                rgb[color] = parseInt(rgb[color], 16);
            }
            return rgb;
        }
        else {
            return { r: 0, g: 0, b: 0 };
        }
    }
    rgbToHex({ r, g, b }) {
        return '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
    }
}
UtilitiesService.ɵprov = i0.ɵɵdefineInjectable({ factory: function UtilitiesService_Factory() { return new UtilitiesService(); }, token: UtilitiesService, providedIn: "root" });
UtilitiesService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbGl0aWVzLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9jb21wb25lbnRzL3NyYy9zZXJ2aWNlcy91dGlsaXRpZXMuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFBOztBQUsxQyxNQUFNLE9BQU8sZ0JBQWdCO0lBQzNCLFFBQVEsQ0FBRSxLQUFhLEVBQUUsS0FBYSxFQUFFLEtBQWEsRUFBRSxNQUFjLEVBQUUsTUFBYztRQUNuRixPQUFPLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxHQUFHLE1BQU0sQ0FBQTtJQUN2RSxDQUFDO0lBRUQsV0FBVyxDQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFNakQ7UUFDQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUN6QixNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUN6QixNQUFNLEtBQUssR0FBRyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQTtRQUNqRCxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxHQUFHLEtBQUssR0FBRyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFBO0lBQ25ELENBQUM7SUFFRCxrQkFBa0IsQ0FBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBTXhEO1FBQ0MsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFBO1FBQzVCLEtB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QUFDLEVBQUUsQ0FBQTtTQUM1QjtJQUNILENBQUM7SUFFRCxRQUFRLENBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBdUM7UUFDeEQsT0FBTyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQzNFLENBQUM7Ozs7WUEzR0YsVUFBVSxTQUFDO2dCQUNWLFVBQVUsRUFBRSxNQUFNO2FBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIFV0aWxpdGllc1NlcnZpY2Uge1xuICBtYXBWYWx1ZSAodmFsdWU6IG51bWJlciwgaW5NaW46IG51bWJlciwgaW5NYXg6IG51bWJlciwgb3V0TWluOiBudW1iZXIsIG91dE1heDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHZhbHVlIC0gaW5NaW4pICogKG91dE1heCAtIG91dE1pbikgLyAoaW5NYXggLSBpbk1pbikgKyBvdXRNaW5cbiAgfVxuXG4gIGxvZ01hcFZhbHVlICh7IHZhbHVlLCBpbk1pbiwgaW5NYXgsIG91dE1pbiwgb3V0TWF4IH06IHtcbiAgICB2YWx1ZTogbnVtYmVyXG4gICAgaW5NaW46IG51bWJlclxuICAgIGluTWF4OiBudW1iZXJcbiAgICBvdXRNaW46IG51bWJlclxuICAgIG91dE1heDogbnVtYmVyXG4gIH0pIHtcbiAgICBvdXRNaW4gPSBNYXRoLmxvZyhvdXRNaW4pXG4gICAgb3V0TWF4ID0gTWF0aC5sb2cob3V0TWF4KVxuICAgIGNvbnN0IHNjYWxlID0gKG91dE1heCAtIG91dE1pbikgLyAoaW5NYXggLSBpbk1pbilcbiAgICByZXR1cm4gTWF0aC5leHAob3V0TWluICsgc2NhbGUgKiAodmFsdWUgLSBpbk1pbikpXG4gIH1cblxuICBsb2dNYXBWYWx1ZUludmVyc2UgKHsgdmFsdWUsIGluTWluLCBpbk1heCwgb3V0TWluLCBvdXRNYXggfToge1xuICAgIHZhbHVlOiBudW1iZXJcbiAgICBpbk1pbjogbnVtYmVyXG4gICAgaW5NYXg6IG51bWJlclxuICAgIG91dE1pbjogbnVtYmVyXG4gICAgb3V0TWF4OiBudW1iZXJcbiAgfSkge1xuICAgIGluTWluID0gTWF0aC5sb2coaW5NaW4gfHwgMSlcbiAgICBpbk1heCA9IE1hdGgubG9nKGluTWF4KVxuICAgIG91dE1pbiA9IG91dE1pbiB8fCAxXG4gICAgY29uc3Qgc2NhbGUgPSAoaW5NYXggLSBpbk1pbikgLyAob3V0TWF4IC0gb3V0TWluKVxuICAgIGNvbnN0IHJlc3VsdCA9IChNYXRoLmxvZyh2YWx1ZSkgLSBpbk1pbikgLyBzY2FsZSArIG91dE1pblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIGdldEltYWdlRnJvbVNyY1doZW5Mb2FkZWQgKHNyYzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPEhUTUxJbWFnZUVsZW1lbnQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKClcbiAgICAgIGltYWdlLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cycgLy8gVGhpcyBlbmFibGVzIENPUlNcbiAgICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoaW1hZ2UpXG4gICAgICBpbWFnZS5vbmVycm9yID0gKCkgPT4gcmVqZWN0KGltYWdlKVxuICAgICAgaW1hZ2Uuc3JjID0gc3JjXG4gICAgfSlcbiAgfVxuXG4gIGdldEJhY2tncm91bmRJbWFnZVNyY0Zyb21DbGFzcyAoY2xhc3NOYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGRpdi5jbGFzc05hbWUgPSBjbGFzc05hbWVcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLmFwcGVuZENoaWxkKGRpdilcbiAgICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRpdilcbiAgICBjb25zdCBzcmMgPSBzdHlsZS5iYWNrZ3JvdW5kSW1hZ2Uuc2xpY2UoNCwgc3R5bGUuYmFja2dyb3VuZEltYWdlLmxlbmd0aCAtIDEpLnJlcGxhY2UoL1wiL2csICcnKVxuICAgIGRpdi5wYXJlbnROb2RlPy5yZW1vdmVDaGlsZChkaXYpXG4gICAgcmV0dXJuIHNyY1xuICB9XG5cbiAgZ2V0SW1hZ2VGcm9tQ2xhc3NCYWNrZ3JvdW5kSW1hZ2VTcmNXaGVuTG9hZGVkIChjbGFzc05hbWU6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmdldEltYWdlRnJvbVNyY1doZW5Mb2FkZWQodGhpcy5nZXRCYWNrZ3JvdW5kSW1hZ2VTcmNGcm9tQ2xhc3MoY2xhc3NOYW1lKSlcbiAgfVxuXG4gIGdldFJhbmRvbUZsb2F0SW5SYW5nZSAobWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIChNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW4pXG4gIH1cblxuICBnZXRDb29yZGluYXRlc0luc2lkZUVsZW1lbnRGcm9tRXZlbnQgKGV2ZW50OiBNb3VzZUV2ZW50LCBlbGVtZW50PzogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBlbCA9IGVsZW1lbnQgfHwgZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQsXG4gICAgICB5OiBldmVudC5jbGllbnRZIC0gcmVjdC50b3BcbiAgICB9XG4gIH1cblxuICBkZWxheSAobXM6IG51bWJlcikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpXG4gICAgfSlcbiAgfVxuXG4gIGdldEVsZW1lbnRQb3NpdGlvbiAoZWw6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgY29uc3Qgc2Nyb2xsTGVmdCA9IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdFxuICAgIGNvbnN0IHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wXG4gICAgcmV0dXJuIHsgeTogcmVjdC50b3AgKyBzY3JvbGxUb3AsIHg6IHJlY3QubGVmdCArIHNjcm9sbExlZnQgfVxuICB9XG5cbiAgaGV4VG9SZ2IgKGhleDogc3RyaW5nKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gL14jPyhbYS1mXFxkXXsxLDJ9KShbYS1mXFxkXXsxLDJ9KShbYS1mXFxkXXsxLDJ9KSQvaS5leGVjKGhleClcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICB0eXBlIGNvbG9yQ29kZSA9ICdyJyB8ICdnJyB8ICdiJ1xuICAgICAgY29uc3QgcmdiOiB7IFtjb2xvciBpbiBjb2xvckNvZGVdOiBhbnkgfSA9IHtcbiAgICAgICAgcjogcmVzdWx0WzFdLFxuICAgICAgICBnOiByZXN1bHRbMl0sXG4gICAgICAgIGI6IHJlc3VsdFszXVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBbIGNvbG9yLCBoZXggXSBvZiBPYmplY3QuZW50cmllcyhyZ2IpKSB7XG4gICAgICAgIGlmICgoaGV4IGFzIHN0cmluZykubGVuZ3RoIDwgMikgcmdiW2NvbG9yIGFzIGNvbG9yQ29kZV0gPSBgJHtoZXh9JHtoZXh9YFxuICAgICAgICByZ2JbY29sb3IgYXMgY29sb3JDb2RlXSA9IHBhcnNlSW50KHJnYltjb2xvciBhcyBjb2xvckNvZGVdLCAxNilcbiAgICAgIH1cbiAgICAgIHJldHVybiByZ2JcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHsgcjogMCwgZzogMCwgYjogMCB9XG4gICAgfVxuICB9XG5cbiAgcmdiVG9IZXggKHsgciwgZywgYiB9OiB7IHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIgfSkge1xuICAgIHJldHVybiAnIycgKyAoKDEgPDwgMjQpICsgKHIgPDwgMTYpICsgKGcgPDwgOCkgKyBiKS50b1N0cmluZygxNikuc2xpY2UoMSlcbiAgfVxufVxuIl19